<!-- static/demo.html -->
<!DOCTYPE html>
<html>
<head>
    <title>HRMS Demo</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 50px auto; }
        .login-box { border: 1px solid #ccc; padding: 20px; }
        .info-box { margin-top: 20px; border: 1px solid #0066cc; padding: 15px; }
        button { background: #0066cc; color: white; padding: 10px 20px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>HRMS Access Demo</h1>
    
    <div class="login-box">
        <h2>Quick Login</h2>
        <button onclick="login('john@techcorp.com')">Login as John (Super Admin)</button>
        <button onclick="login('alice@techcorp.com')">Login as Alice (Manager)</button>
        <button onclick="login('charlie@techcorp.com')">Login as Charlie (Employee)</button>
    </div>
    
    <div id="result" class="info-box" style="display:none;"></div>
    
    <script>
        async function login(email) {
            const response = await fetch('/api/auth/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({email, password: 'password123'})
            });
            
            const data = await response.json();
            localStorage.setItem('token', data.access_token);
            
            await showUserInfo();
        }
        
        async function showUserInfo() {
            const token = localStorage.getItem('token');
            const response = await fetch('/api/auth/me', {
                headers: {'Authorization': `Bearer ${token}`}
            });
            
            const data = await response.json();
            
            document.getElementById('result').style.display = 'block';
            /***document.getElementById('result').innerHTML = `
                <h3>Logged in as: ${data.user.full_name}</h3>
                <p><strong>Roles:</strong> ${data.roles.map(r => r.role).join(', ')}</p>
                <p><strong>Can view all employees:</strong> ${data.permissions.can_view_all_employees ? '✅ Yes' : '❌ No'}</p>
            `;***/
            const permsHtml = Object.entries(data.permissions)
            .map(([key, value]) => `<li>${key}: ${value ? '✅' : '❌'}</li>`)
            .join('');

            document.getElementById('result').style.display = 'block';
            document.getElementById('result').innerHTML = `
                <h3>Logged in as: ${data.user.full_name}</h3>
                <p><strong>Roles:</strong> ${data.roles.map(r => r.role).join(', ')}</p>
                <h4>Permissions:</h4>
                <ul>${permsHtml}</ul>
            `;

        }
    </script>
</body>
</html>